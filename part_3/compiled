#! /usr/bin/vvp
:ivl_version "10.2 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 12;
:vpi_module "system";
:vpi_module "vhdl_sys";
:vpi_module "v2005_math";
:vpi_module "va_math";
S_0x17e99f0 .scope module, "mac_tile_tb" "mac_tile_tb" 2 3;
 .timescale -9 -12;
P_0x1804ab0 .param/l "bw" 0 2 5, +C4<00000000000000000000000000000100>;
P_0x1804af0 .param/l "psum_bw" 0 2 6, +C4<00000000000000000000000000010000>;
v0x182c920_0 .var "clk", 0 0;
v0x182ca10_0 .var "in_n", 15 0;
v0x182cae0_0 .var "in_w", 3 0;
v0x182cbe0_0 .net "inst_e", 2 0, L_0x183d8b0;  1 drivers
v0x182ccb0_0 .var "inst_w", 2 0;
v0x182cd50_0 .net "out_e", 3 0, L_0x183d7a0;  1 drivers
v0x182ce20_0 .net "out_s", 15 0, L_0x183d580;  1 drivers
v0x182cef0_0 .var "reset", 0 0;
S_0x17e8140 .scope module, "dut" "mac_tile" 2 18, 3 1 0, S_0x17e99f0;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk"
    .port_info 1 /OUTPUT 16 "out_s"
    .port_info 2 /INPUT 4 "in_w"
    .port_info 3 /OUTPUT 4 "out_e"
    .port_info 4 /INPUT 16 "in_n"
    .port_info 5 /INPUT 3 "inst_w"
    .port_info 6 /OUTPUT 3 "inst_e"
    .port_info 7 /INPUT 1 "reset"
P_0x17f9e10 .param/l "bw" 0 3 3, +C4<00000000000000000000000000000100>;
P_0x17f9e50 .param/l "psum_bw" 0 3 4, +C4<00000000000000000000000000010000>;
L_0x183d7a0 .functor BUFZ 4, v0x182ba10_0, C4<0000>, C4<0000>, C4<0000>;
L_0x183d8b0 .functor BUFZ 3, v0x182c100_0, C4<000>, C4<000>, C4<000>;
v0x182b6b0_0 .net *"_s10", 15 0, L_0x183d3f0;  1 drivers
v0x182b7b0_0 .net *"_s5", 0 0, L_0x182d150;  1 drivers
L_0x7f648b99c018 .functor BUFT 1, C4<000000000000>, C4<0>, C4<0>, C4<0>;
v0x182b870_0 .net/2u *"_s6", 11 0, L_0x7f648b99c018;  1 drivers
v0x182b930_0 .net *"_s8", 15 0, L_0x183d280;  1 drivers
v0x182ba10_0 .var "a_q", 3 0;
v0x182bad0_0 .var "b_q", 3 0;
v0x182bba0_0 .var "c_q", 15 0;
v0x182bc70_0 .net "clk", 0 0, v0x182c920_0;  1 drivers
v0x182bd10_0 .net "execute", 0 0, L_0x182d0b0;  1 drivers
v0x182be60_0 .net "in_n", 15 0, v0x182ca10_0;  1 drivers
v0x182bf40_0 .net "in_w", 3 0, v0x182cae0_0;  1 drivers
v0x182c020_0 .net "inst_e", 2 0, L_0x183d8b0;  alias, 1 drivers
v0x182c100_0 .var "inst_q", 2 0;
v0x182c1e0_0 .net "inst_w", 2 0, v0x182ccb0_0;  1 drivers
v0x182c2c0_0 .var "load_ready_q", 0 0;
v0x182c380_0 .net "mac_out", 15 0, L_0x183dec0;  1 drivers
v0x182c470_0 .net "os", 0 0, L_0x182cf90;  1 drivers
v0x182c620_0 .net "out_e", 3 0, L_0x183d7a0;  alias, 1 drivers
v0x182c6c0_0 .net "out_s", 15 0, L_0x183d580;  alias, 1 drivers
v0x182c760_0 .net "reset", 0 0, v0x182cef0_0;  1 drivers
E_0x17e94c0 .event posedge, v0x182bc70_0;
L_0x182cf90 .part v0x182ccb0_0, 2, 1;
L_0x182d0b0 .part v0x182ccb0_0, 1, 1;
L_0x182d150 .reduce/nor L_0x182cf90;
L_0x183d280 .concat [ 4 12 0 0], v0x182bad0_0, L_0x7f648b99c018;
L_0x183d3f0 .functor MUXZ 16, v0x182bba0_0, L_0x183d280, L_0x182d0b0, C4<>;
L_0x183d580 .functor MUXZ 16, L_0x183d3f0, L_0x183dec0, L_0x182d150, C4<>;
S_0x17e9530 .scope module, "mac_instance" "mac" 3 37, 4 3 0, S_0x17e8140;
 .timescale 0 0;
    .port_info 0 /OUTPUT 16 "out"
    .port_info 1 /INPUT 4 "a"
    .port_info 2 /INPUT 4 "b"
    .port_info 3 /INPUT 16 "c"
P_0x17f6fd0 .param/l "bw" 0 4 5, +C4<00000000000000000000000000000100>;
P_0x17f7010 .param/l "psum_bw" 0 4 6, +C4<00000000000000000000000000010000>;
L_0x183dec0 .functor BUFZ 16, L_0x183de20, C4<0000000000000000>, C4<0000000000000000>, C4<0000000000000000>;
L_0x7f648b99c060 .functor BUFT 1, C4<0>, C4<0>, C4<0>, C4<0>;
v0x17eb260_0 .net/2u *"_s0", 0 0, L_0x7f648b99c060;  1 drivers
v0x182ac80_0 .net/s *"_s10", 15 0, L_0x183dd30;  1 drivers
v0x182ad60_0 .net/s *"_s4", 8 0, L_0x183da60;  1 drivers
v0x182ae50_0 .net/s *"_s6", 8 0, L_0x183db50;  1 drivers
v0x182af30_0 .net/s "a", 3 0, v0x182ba10_0;  1 drivers
v0x182b060_0 .net/s "a_pad", 4 0, L_0x183d970;  1 drivers
v0x182b140_0 .net/s "b", 3 0, v0x182bad0_0;  1 drivers
v0x182b220_0 .net/s "c", 15 0, v0x182bba0_0;  1 drivers
v0x182b300_0 .net/s "out", 15 0, L_0x183dec0;  alias, 1 drivers
v0x182b470_0 .net/s "product", 8 0, L_0x183dbf0;  1 drivers
v0x182b550_0 .net/s "psum", 15 0, L_0x183de20;  1 drivers
L_0x183d970 .concat [ 4 1 0 0], v0x182ba10_0, L_0x7f648b99c060;
L_0x183da60 .extend/s 9, L_0x183d970;
L_0x183db50 .extend/s 9, v0x182bad0_0;
L_0x183dbf0 .arith/mult 9, L_0x183da60, L_0x183db50;
L_0x183dd30 .extend/s 16, L_0x183dbf0;
L_0x183de20 .arith/sum 16, L_0x183dd30, v0x182bba0_0;
    .scope S_0x17e8140;
T_0 ;
    %wait E_0x17e94c0;
    %load/vec4 v0x182c760_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_0.0, 8;
    %pushi/vec4 0, 0, 4;
    %assign/vec4 v0x182ba10_0, 0;
    %jmp T_0.1;
T_0.0 ;
    %load/vec4 v0x182c470_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_0.2, 8;
    %load/vec4 v0x182c1e0_0;
    %parti/s 2, 0, 2;
    %or/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_0.4, 8;
    %load/vec4 v0x182bf40_0;
    %assign/vec4 v0x182ba10_0, 0;
T_0.4 ;
    %jmp T_0.3;
T_0.2 ;
    %load/vec4 v0x182c1e0_0;
    %parti/s 2, 0, 2;
    %cmpi/ne 0, 0, 2;
    %jmp/0xz  T_0.6, 4;
    %load/vec4 v0x182bf40_0;
    %assign/vec4 v0x182ba10_0, 0;
T_0.6 ;
T_0.3 ;
T_0.1 ;
    %jmp T_0;
    .thread T_0;
    .scope S_0x17e8140;
T_1 ;
    %wait E_0x17e94c0;
    %load/vec4 v0x182c760_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.0, 8;
    %pushi/vec4 0, 0, 4;
    %assign/vec4 v0x182bad0_0, 0;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x182c2c0_0, 0;
    %pushi/vec4 0, 0, 3;
    %assign/vec4 v0x182c100_0, 0;
    %jmp T_1.1;
T_1.0 ;
    %load/vec4 v0x182c470_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.2, 8;
    %load/vec4 v0x182c1e0_0;
    %parti/s 2, 1, 2;
    %ix/load 4, 1, 0;
    %ix/load 5, 0, 0;
    %flag_set/imm 4, 0;
    %assign/vec4/off/d v0x182c100_0, 4, 5;
    %load/vec4 v0x182c1e0_0;
    %parti/s 1, 0, 2;
    %load/vec4 v0x182c2c0_0;
    %and;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.4, 8;
    %load/vec4 v0x182bf40_0;
    %assign/vec4 v0x182bad0_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x182c2c0_0, 0;
    %jmp T_1.5;
T_1.4 ;
    %load/vec4 v0x182c2c0_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.6, 8;
    %load/vec4 v0x182c1e0_0;
    %parti/s 1, 0, 2;
    %ix/load 4, 0, 0;
    %ix/load 5, 0, 0;
    %flag_set/imm 4, 0;
    %assign/vec4/off/d v0x182c100_0, 4, 5;
T_1.6 ;
T_1.5 ;
    %jmp T_1.3;
T_1.2 ;
    %load/vec4 v0x182c1e0_0;
    %assign/vec4 v0x182c100_0, 0;
    %load/vec4 v0x182bd10_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.8, 8;
    %load/vec4 v0x182be60_0;
    %parti/s 4, 0, 2;
    %assign/vec4 v0x182bad0_0, 0;
T_1.8 ;
T_1.3 ;
T_1.1 ;
    %jmp T_1;
    .thread T_1;
    .scope S_0x17e8140;
T_2 ;
    %wait E_0x17e94c0;
    %load/vec4 v0x182c760_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_2.0, 8;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x182bba0_0, 0;
    %jmp T_2.1;
T_2.0 ;
    %load/vec4 v0x182c470_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_2.2, 8;
    %load/vec4 v0x182c1e0_0;
    %parti/s 2, 0, 2;
    %or/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_2.4, 8;
    %load/vec4 v0x182be60_0;
    %assign/vec4 v0x182bba0_0, 0;
T_2.4 ;
    %jmp T_2.3;
T_2.2 ;
    %load/vec4 v0x182c1e0_0;
    %parti/s 1, 0, 2;
    %flag_set/vec4 8;
    %jmp/0xz  T_2.6, 8;
    %load/vec4 v0x182be60_0;
    %assign/vec4 v0x182bba0_0, 0;
    %jmp T_2.7;
T_2.6 ;
    %load/vec4 v0x182c100_0;
    %parti/s 1, 1, 2;
    %flag_set/vec4 8;
    %jmp/0xz  T_2.8, 8;
    %load/vec4 v0x182c380_0;
    %assign/vec4 v0x182bba0_0, 0;
T_2.8 ;
T_2.7 ;
T_2.3 ;
T_2.1 ;
    %jmp T_2;
    .thread T_2;
    .scope S_0x17e99f0;
T_3 ;
    %delay 5000, 0;
    %load/vec4 v0x182c920_0;
    %inv;
    %store/vec4 v0x182c920_0, 0, 1;
    %jmp T_3;
    .thread T_3;
    .scope S_0x17e99f0;
T_4 ;
    %vpi_call 2 35 "$dumpfile", "mac_tile_tb.vcd" {0 0 0};
    %vpi_call 2 36 "$dumpvars", 32'sb00000000000000000000000000000000, S_0x17e99f0 {0 0 0};
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x182c920_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x182cef0_0, 0, 1;
    %pushi/vec4 0, 0, 4;
    %store/vec4 v0x182cae0_0, 0, 4;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x182ca10_0, 0, 16;
    %pushi/vec4 0, 0, 3;
    %store/vec4 v0x182ccb0_0, 0, 3;
    %delay 20000, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x182cef0_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %store/vec4 v0x182ccb0_0, 4, 1;
    %vpi_call 2 53 "$display", "NON-SIMD mode" {0 0 0};
    %vpi_call 2 54 "$display", "\012--- LOAD WEIGHT #1 (non-SIMD) ---" {0 0 0};
    %pushi/vec4 3, 0, 4;
    %store/vec4 v0x182cae0_0, 0, 4;
    %pushi/vec4 1, 0, 2;
    %ix/load 4, 0, 0;
    %flag_set/imm 4, 0;
    %store/vec4 v0x182ccb0_0, 4, 2;
    %delay 10000, 0;
    %vpi_call 2 69 "$display", "\012--- LOAD WEIGHT #2 (non-SIMD) ---" {0 0 0};
    %pushi/vec4 5, 0, 4;
    %store/vec4 v0x182cae0_0, 0, 4;
    %pushi/vec4 1, 0, 2;
    %ix/load 4, 0, 0;
    %flag_set/imm 4, 0;
    %store/vec4 v0x182ccb0_0, 4, 2;
    %delay 10000, 0;
    %vpi_call 2 75 "$display", "inst_e = %b (expected 001)", v0x182cbe0_0 {0 0 0};
    %vpi_call 2 76 "$display", "out_e  = %0d (expected 3)" {0 0 0};
    %vpi_call 2 84 "$display", "\012--- EXECUTE ---" {0 0 0};
    %pushi/vec4 2, 0, 4;
    %store/vec4 v0x182cae0_0, 0, 4;
    %pushi/vec4 10, 0, 16;
    %store/vec4 v0x182ca10_0, 0, 16;
    %pushi/vec4 2, 0, 2;
    %ix/load 4, 0, 0;
    %flag_set/imm 4, 0;
    %store/vec4 v0x182ccb0_0, 4, 2;
    %delay 10000, 0;
    %vpi_call 2 91 "$display", "out_s = %0d (expected 3*2 + 10 = 16)" {0 0 0};
    %vpi_call 2 93 "$display", "\012--- EXECUTE ---" {0 0 0};
    %pushi/vec4 3, 0, 4;
    %store/vec4 v0x182cae0_0, 0, 4;
    %pushi/vec4 5, 0, 16;
    %store/vec4 v0x182ca10_0, 0, 16;
    %pushi/vec4 2, 0, 2;
    %ix/load 4, 0, 0;
    %flag_set/imm 4, 0;
    %store/vec4 v0x182ccb0_0, 4, 2;
    %delay 10000, 0;
    %vpi_call 2 101 "$display", "\012--- TEST COMPLETE ---" {0 0 0};
    %vpi_call 2 104 "$display", "\012 Output stationary" {0 0 0};
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x182cef0_0, 0, 1;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x182ca10_0, 0, 16;
    %pushi/vec4 0, 0, 4;
    %store/vec4 v0x182cae0_0, 0, 4;
    %pushi/vec4 0, 0, 3;
    %store/vec4 v0x182ccb0_0, 0, 3;
    %delay 20000, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x182cef0_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %store/vec4 v0x182ccb0_0, 4, 1;
    %pushi/vec4 1, 0, 1;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %store/vec4 v0x182ccb0_0, 4, 1;
    %pushi/vec4 2, 0, 16;
    %store/vec4 v0x182ca10_0, 0, 16;
    %pushi/vec4 4, 0, 4;
    %store/vec4 v0x182cae0_0, 0, 4;
    %delay 10000, 0;
    %pushi/vec4 4, 0, 16;
    %store/vec4 v0x182ca10_0, 0, 16;
    %pushi/vec4 1, 0, 4;
    %store/vec4 v0x182cae0_0, 0, 4;
    %delay 10000, 0;
    %pushi/vec4 14, 0, 16;
    %store/vec4 v0x182ca10_0, 0, 16;
    %pushi/vec4 1, 0, 4;
    %store/vec4 v0x182cae0_0, 0, 4;
    %delay 10000, 0;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x182ca10_0, 0, 16;
    %delay 10000, 0;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x182ca10_0, 0, 16;
    %delay 10000, 0;
    %pushi/vec4 0, 0, 1;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %store/vec4 v0x182ccb0_0, 4, 1;
    %delay 10000, 0;
    %delay 10000, 0;
    %delay 10000, 0;
    %delay 10000, 0;
    %pushi/vec4 1, 0, 1;
    %ix/load 4, 0, 0;
    %flag_set/imm 4, 0;
    %store/vec4 v0x182ccb0_0, 4, 1;
    %pushi/vec4 511, 0, 16;
    %store/vec4 v0x182ca10_0, 0, 16;
    %delay 10000, 0;
    %pushi/vec4 65336, 0, 16;
    %store/vec4 v0x182ca10_0, 0, 16;
    %delay 20000, 0;
    %vpi_call 2 160 "$finish" {0 0 0};
    %end;
    .thread T_4;
# The file index is used to find the file name in the following table.
:file_names 5;
    "N/A";
    "<interactive>";
    "./verilog/mac_tile_tb.v";
    "./verilog/mac_tile.v";
    "./verilog/mac.v";
